<template name="book">
  {{#with book}}
  <div class="book">
    <div class="title">
      <h1>{{title}}</h1>
      {{#if subtitle}}
      <h3>{{subtitle}}</h3>
      {{/if}}
    </div>
    <div class="toolbar">
      <ul class="control">
        <li><a href="#" class="{{allActive}}" data-value="0">全部</a></li>
        <li><a href="#" class="{{unreadActive}}" data-value="1">未读</a></li>
        {{#if writable}}
        <li><a href="#" class="{{composeActive}}" data-value="2">撰写文章</a></li>
        {{/if}}
      </ul>
      <span class="count">{{stories}}篇文章，{{hearts}}喜欢，{{reads}}阅读</span>
      {{#each authors}}
      <span class="author">
        <a href="#"><img src="{{avatar}}" class="avatar" title="{{username}}" /></a>
      </span>
      {{/each}}
    </div>
  </div>
  <div class="stories row-fluid">
    {{#if composeActive}}
      {{>composePanel}}
    {{else}}
      <ul class="thumbnails">
        {{#each stories}}
        <li class="span6 story-summary" data-slug="{{slug}}" data-id="{{_id}}">
          {{>storySummary}}
        </li>
        {{/each}}
      </ul>
    {{/if}}
  </div>
  {{/with}}
</template>

<template name="composePanel">
  <div class="story-compose story-summary span12">
    <div class="link-wrap">
      <form class="form-horizontal">
        <div class="control-group">
          <label class="control-label" for="book-title">标题</label>
          <input type="text" class="input-xxlarge" name="title" id="book-title" placeholder="比如：关于觅珠人的一切" maxlength="16" />
          <span class="help-inline">系列标题不能重复，且不能为空，16个字符内</span>
        </div>

        <div class="control-group">
          <label class="control-label" for="book-slug">SLUG</label>
          <input type="text" class="input-xxlarge" name="title" id="book-slug" placeholder="提供友好的URL，比如：about-pearl-divers" maxlength="32" />
          <span class="help-inline">SLUG不能重复，不能为空, 32个字符内</span>
        </div>

        <div class="control-group">
          <label class="control-label" for="book-subtitle">副标题</label>
          <input type="text" class="input-xxlarge" name="subtitle" id="book-subtitle" placeholder="" maxlength="32" />
        </div>

        <div class="control-group">
          <label class="control-label" for="book-description">内容</label>
          <textarea name="description" class="input-xlarge" id="book-description" placeholder="让读者能够了解这个系列是什么"></textarea>
        </div>
      </form>
      <div class="footer">
        <div class="control">
          <span class="alert-error" id="book-create-error"></span>
          <a href="#" class="btn" id="book-create-cancel">取消</a>
          <a href="#" class="btn btn-primary" id="book-create-submit">立即创建</a>
        </div>
      </div>
    </div>
  </div>

</template>